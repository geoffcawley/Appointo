node('master'){
    stage('import'){
		try {
			git 'https://github.com/geoffcawley/Appointo.git'
		} catch(e) {
			slackSend(message:'Appointo failed import')
			throw e
		}
    }   
    
    stage('build') {
		try {
			dir('C:\\Program Files (x86)\\Jenkins\\workspace\\appointo-pipe\\Appointo.Entity\\Appointo.Entity')	{
				bat 'dotnet restore'
				bat 'msbuild /t:clean,build Appointo.Entity.csproj'
			}
		} catch(e) {
			slackSend(message:'Appointo build failure')
			throw e
		}
    }

    stage('analyze') {
		try {
			dir('Appointo.Entity') {
				bat 'C:\\Tools\\SonarQube\\SonarQube.Scanner.MSBuild.exe begin /k:appointo'
				bat 'dotnet build'
				bat 'C:\\Tools\\SonarQube\\SonarQube.Scanner.MSBuild.exe end'
			}
		} catch(e) {
			slackSend(message:'Appointo analysis failure')
			throw e
		}
    }

    stage('package') {
		try {
		} catch(e) {
			throw e
		}
    }
    
    stage('deploy') {
		try {
		} catch(e) {
			throw e
		}
    }
}